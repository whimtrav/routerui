import{d as ba,f as o,a as r,c as it,s as i}from"../chunks/DhZLAEWt.js";import{o as fa}from"../chunks/D-tgmMSQ.js";import{p as xa,s as h,a as Ot,h as z,b as ma,e as ya,$ as ha,d as s,c as e,g as t,r as a,f as n,t as m,n as jt}from"../chunks/N1otwjTT.js";import{i as g}from"../chunks/CWp393YG.js";import{e as St,i as It}from"../chunks/CxGl9W59.js";import{h as ka,s as Yt}from"../chunks/DtPs97YY.js";import{r as wa}from"../chunks/uT__Kkxm.js";import{b as ja}from"../chunks/DLE3Upo7.js";var Sa=o('<div class="text-gray-400">Loading...</div>'),Ia=o('<div class="card bg-red-900/20 border-red-700"><p class="text-red-400">Docker is not installed.</p></div>'),Na=o('<div class="card bg-yellow-900/20 border-yellow-700"><p class="text-yellow-400">Docker is installed but not running. Start it from the Services tab.</p></div>'),Pa=o('<button> <span class="ml-1 text-xs text-gray-500"> </span></button>'),Ca=o('<p class="text-gray-500">No containers found.</p>'),Ra=o('<button class="btn-action btn-yellow svelte-12lj259">Restart</button> <button class="btn-action btn-red svelte-12lj259">Stop</button>',1),Ta=o('<button class="btn-action btn-green svelte-12lj259">Unpause</button>'),Da=o('<button class="btn-action btn-green svelte-12lj259">Start</button>'),La=o('<div><span class="text-gray-400">CPU:</span> <span class="ml-1"> </span></div>'),Oa=o('<div><span class="text-gray-400">Memory:</span> <span class="ml-1"> </span></div>'),Ja=o('<div class="mt-2 text-sm"><span class="text-gray-400">Ports:</span> <span class="ml-1 font-mono text-xs"> </span></div>'),Va=o('<div class="p-4 bg-gray-700/50 rounded"><div class="flex items-center justify-between mb-2"><div class="flex items-center gap-3"><div></div> <span class="font-medium"> </span> <span class="text-xs text-gray-500"> </span></div> <div class="flex items-center gap-2"><!> <button class="btn-action btn-red svelte-12lj259">Remove</button> <button class="btn-action btn-gray svelte-12lj259">Logs</button></div></div> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mt-2"><div><span class="text-gray-400">Image:</span> <span class="ml-1 text-blue-400"> </span></div> <div><span class="text-gray-400">Status:</span> <span class="ml-1"> </span></div> <!> <!></div> <!></div>'),za=o('<div class="space-y-3"></div>'),Ma=o('<div class="card"><h3 class="text-lg font-semibold mb-4">Containers</h3> <!></div>'),Ua=o('<p class="text-gray-500">No images found.</p>'),Aa=o('<tr class="border-b border-gray-700/50"><td class="py-2 text-blue-400"> </td><td class="py-2"> </td><td class="py-2 font-mono text-xs text-gray-500"> </td><td class="py-2"> </td><td class="py-2 text-gray-400"> </td><td class="py-2"><button class="text-red-400 hover:text-red-300 text-xs">Remove</button></td></tr>'),Fa=o('<div class="overflow-x-auto"><table class="w-full text-sm"><thead><tr class="text-left text-gray-400 border-b border-gray-700"><th class="pb-2">Repository</th><th class="pb-2">Tag</th><th class="pb-2">ID</th><th class="pb-2">Size</th><th class="pb-2">Created</th><th class="pb-2"></th></tr></thead><tbody></tbody></table></div>'),qa=o('<div class="card"><h3 class="text-lg font-semibold mb-4">Images</h3> <div class="flex gap-2 mb-4"><input type="text" placeholder="Image name (e.g., nginx:latest)" class="input flex-1 svelte-12lj259"/> <button class="btn-primary svelte-12lj259"> </button></div> <!></div>'),Ba=o('<p class="text-gray-500">No volumes found.</p>'),Ea=o('<div class="p-3 bg-gray-700/50 rounded"><div class="font-medium"> </div> <div class="text-sm text-gray-400"> </div></div>'),Ga=o('<div class="space-y-2"></div>'),Ha=o('<div class="card"><h3 class="text-lg font-semibold mb-4">Volumes</h3> <!></div>'),Ka=o('<p class="text-gray-500">No networks found.</p>'),Qa=o('<tr class="border-b border-gray-700/50"><td class="py-2 font-medium"> </td><td class="py-2"> </td><td class="py-2"> </td><td class="py-2 font-mono text-xs text-gray-500"> </td></tr>'),Wa=o('<div class="overflow-x-auto"><table class="w-full text-sm"><thead><tr class="text-left text-gray-400 border-b border-gray-700"><th class="pb-2">Name</th><th class="pb-2">Driver</th><th class="pb-2">Scope</th><th class="pb-2">ID</th></tr></thead><tbody></tbody></table></div>'),Xa=o('<div class="card"><h3 class="text-lg font-semibold mb-4">Networks</h3> <!></div>'),Ya=o('<div class="card"><div class="grid grid-cols-2 md:grid-cols-5 gap-4"><div class="bg-gray-700/50 rounded p-3 text-center"><p class="text-xl font-bold text-blue-400"> </p> <p class="text-xs text-gray-400">Docker Version</p></div> <div class="bg-gray-700/50 rounded p-3 text-center"><p class="text-2xl font-bold text-green-400"> </p> <p class="text-xs text-gray-400">Running</p></div> <div class="bg-gray-700/50 rounded p-3 text-center"><p class="text-2xl font-bold text-gray-400"> </p> <p class="text-xs text-gray-400">Stopped</p></div> <div class="bg-gray-700/50 rounded p-3 text-center"><p class="text-2xl font-bold text-purple-400"> </p> <p class="text-xs text-gray-400">Images</p></div> <div class="bg-gray-700/50 rounded p-3 text-center"><p class="text-2xl font-bold text-orange-400"> </p> <p class="text-xs text-gray-400">Volumes</p></div></div></div> <div class="border-b border-gray-700"><nav class="flex gap-4"></nav></div> <!>',1),Za=o('<div class="text-gray-400">Loading logs...</div>'),$a=o('<pre class="text-xs font-mono text-gray-300 whitespace-pre-wrap"> </pre>'),te=o('<p class="text-gray-500">No logs available.</p>'),ae=o('<div class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4"><div class="bg-gray-800 rounded-lg w-full max-w-4xl max-h-[80vh] flex flex-col"><div class="flex items-center justify-between p-4 border-b border-gray-700"><h3 class="text-lg font-semibold"> </h3> <button class="text-gray-400 hover:text-white text-2xl">&times;</button></div> <div class="flex-1 overflow-auto p-4"><!></div> <div class="p-4 border-t border-gray-700 flex justify-end"><button class="btn-primary svelte-12lj259">Close</button></div></div></div>'),ee=o('<div class="space-y-6"><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold">Docker</h2> <p class="text-sm text-gray-500">Manage containers, images, and volumes.</p></div></div> <!></div> <!>',1);function ce(Zt,$t){xa($t,!0);let Et=h(!0),dt=h("containers"),H=h(null),Nt=h(Ot([])),Pt=h(Ot([])),Ct=h(Ot([])),Rt=h(Ot([])),Tt=h(null),gt=h(""),Jt=h(!1),et=h(null),bt=h(""),Dt=h(!1);async function ft(){try{const[v,c,N,T,K]=await Promise.all([fetch("/api/docker/status"),fetch("/api/docker/containers"),fetch("/api/docker/images"),fetch("/api/docker/volumes"),fetch("/api/docker/networks")]);v.ok&&n(H,await v.json(),!0),c.ok&&n(Nt,await c.json(),!0),N.ok&&n(Pt,await N.json(),!0),T.ok&&n(Ct,await T.json(),!0),K.ok&&n(Rt,await K.json(),!0)}catch(v){console.error(v)}finally{n(Et,!1)}}fa(()=>{ft();const v=setInterval(ft,1e4);return()=>clearInterval(v)});async function xt(v,c){n(et,`${v}-${c}`);try{(await fetch("/api/docker/containers/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v,action:c})})).ok&&(await new Promise(T=>setTimeout(T,1e3)),await ft())}finally{n(et,null)}}async function ta(v){n(Tt,v,!0),n(Jt,!0),n(gt,"");try{const c=await fetch("/api/docker/containers/logs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v.id,lines:200})});if(c.ok){const N=await c.json();n(gt,N.logs,!0)}}finally{n(Jt,!1)}}function Vt(){n(Tt,null),n(gt,"")}async function aa(v){if(!confirm("Are you sure you want to remove this image?"))return;(await fetch("/api/docker/images/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v,action:"remove"})})).ok&&await ft()}async function ea(){if(t(bt)){n(Dt,!0);try{(await fetch("/api/docker/images/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:t(bt)})})).ok&&(n(bt,""),await ft())}finally{n(Dt,!1)}}}function sa(v){switch(v){case"running":return"bg-green-500";case"exited":return"bg-gray-500";case"paused":return"bg-yellow-500";case"restarting":return"bg-blue-500";default:return"bg-gray-500"}}var Gt=ee();ka("12lj259",v=>{ya(()=>{ha.title="Docker - RouterUI"})});var zt=z(Gt),ra=s(e(zt),2);{var oa=v=>{var c=Sa();r(v,c)},la=v=>{var c=it(),N=z(c);{var T=Q=>{var M=Ia();r(Q,M)},K=Q=>{var M=it(),mt=z(M);{var Mt=W=>{var D=Na();r(W,D)},Ut=W=>{var D=Ya(),yt=z(D),P=e(yt),X=e(P),Lt=e(X),At=e(Lt);a(Lt),jt(2),a(X);var ht=s(X,2),U=e(ht),st=e(U,!0);a(U),jt(2),a(ht);var kt=s(ht,2),Ht=e(kt),da=e(Ht,!0);a(Ht),jt(2),a(kt);var Ft=s(kt,2),Kt=e(Ft),na=e(Kt,!0);a(Kt),jt(2),a(Ft);var Qt=s(Ft,2),Wt=e(Qt),ca=e(Wt,!0);a(Wt),jt(2),a(Qt),a(P),a(yt);var qt=s(yt,2),Xt=e(qt);St(Xt,21,()=>[{id:"containers",label:"Containers",count:t(Nt).length},{id:"images",label:"Images",count:t(Pt).length},{id:"volumes",label:"Volumes",count:t(Ct).length},{id:"networks",label:"Networks",count:t(Rt).length}],It,(Y,C)=>{var A=Pa();A.__click=()=>n(dt,t(C).id,!0);var nt=e(A),ct=s(nt),f=e(ct);a(ct),a(A),m(()=>{Yt(A,1,`tab-btn ${t(dt)===t(C).id?"tab-active":""}`,"svelte-12lj259"),i(nt,`${t(C).label??""} `),i(f,`(${t(C).count??""})`)}),r(Y,A)}),a(Xt),a(qt);var _a=s(qt,2);{var pa=Y=>{var C=Ma(),A=s(e(C),2);{var nt=f=>{var k=Ca();r(f,k)},ct=f=>{var k=za();St(k,21,()=>t(Nt),It,(rt,l)=>{var L=Va(),w=e(L),j=e(w),Z=e(j),F=s(Z,2),b=e(F,!0);a(F);var _=s(F,2),S=e(_,!0);a(_),a(j);var q=s(j,2),B=e(q);{var p=d=>{var u=Ra(),y=z(u);y.__click=()=>xt(t(l).id,"restart");var V=s(y,2);V.__click=()=>xt(t(l).id,"stop"),m(()=>{y.disabled=t(et)===`${t(l).id}-restart`,V.disabled=t(et)===`${t(l).id}-stop`}),r(d,u)},x=d=>{var u=it(),y=z(u);{var V=ut=>{var vt=Ta();vt.__click=()=>xt(t(l).id,"unpause"),m(()=>vt.disabled=t(et)===`${t(l).id}-unpause`),r(ut,vt)},at=ut=>{var vt=Da();vt.__click=()=>xt(t(l).id,"start"),m(()=>vt.disabled=t(et)===`${t(l).id}-start`),r(ut,vt)};g(y,ut=>{t(l).state==="paused"?ut(V):ut(at,!1)},!0)}r(d,u)};g(B,d=>{t(l).state==="running"?d(p):d(x,!1)})}var I=s(B,2);I.__click=()=>xt(t(l).id,"remove");var E=s(I,2);E.__click=()=>ta(t(l)),a(q),a(w);var R=s(w,2),O=e(R),J=s(e(O),2),ot=e(J,!0);a(J),a(O);var G=s(O,2),$=s(e(G),2),lt=e($,!0);a($),a(G);var tt=s(G,2);{var _t=d=>{var u=La(),y=s(e(u),2),V=e(y);a(y),a(u),m(at=>i(V,`${at??""}%`),[()=>{var at;return(at=t(l).cpu_percent)==null?void 0:at.toFixed(1)}]),r(d,u)};g(tt,d=>{t(l).cpu_percent!==null&&d(_t)})}var pt=s(tt,2);{var wt=d=>{var u=Oa(),y=s(e(u),2),V=e(y,!0);a(y),a(u),m(()=>i(V,t(l).memory_usage)),r(d,u)};g(pt,d=>{t(l).memory_usage&&d(wt)})}a(R);var Bt=s(R,2);{var ga=d=>{var u=Ja(),y=s(e(u),2),V=e(y,!0);a(y),a(u),m(at=>i(V,at),[()=>t(l).ports.join(", ")]),r(d,u)};g(Bt,d=>{t(l).ports.length>0&&d(ga)})}a(L),m((d,u)=>{Yt(Z,1,`w-3 h-3 rounded-full ${d??""}`,"svelte-12lj259"),i(b,t(l).name),i(S,u),I.disabled=t(et)===`${t(l).id}-remove`,i(ot,t(l).image),i(lt,t(l).status)},[()=>sa(t(l).state),()=>t(l).id.slice(0,12)]),r(rt,L)}),a(k),r(f,k)};g(A,f=>{t(Nt).length===0?f(nt):f(ct,!1)})}a(C),r(Y,C)},ua=Y=>{var C=it(),A=z(C);{var nt=f=>{var k=qa(),rt=s(e(k),2),l=e(rt);wa(l);var L=s(l,2);L.__click=ea;var w=e(L,!0);a(L),a(rt);var j=s(rt,2);{var Z=b=>{var _=Ua();r(b,_)},F=b=>{var _=Fa(),S=e(_),q=s(e(S));St(q,21,()=>t(Pt),It,(B,p)=>{var x=Aa(),I=e(x),E=e(I,!0);a(I);var R=s(I),O=e(R,!0);a(R);var J=s(R),ot=e(J,!0);a(J);var G=s(J),$=e(G,!0);a(G);var lt=s(G),tt=e(lt,!0);a(lt);var _t=s(lt),pt=e(_t);pt.__click=()=>aa(t(p).id),a(_t),a(x),m(wt=>{i(E,t(p).repository),i(O,t(p).tag),i(ot,wt),i($,t(p).size),i(tt,t(p).created)},[()=>t(p).id.slice(0,12)]),r(B,x)}),a(q),a(S),a(_),r(b,_)};g(j,b=>{t(Pt).length===0?b(Z):b(F,!1)})}a(k),m(()=>{L.disabled=t(Dt),i(w,t(Dt)?"Pulling...":"Pull Image")}),ja(l,()=>t(bt),b=>n(bt,b)),r(f,k)},ct=f=>{var k=it(),rt=z(k);{var l=w=>{var j=Ha(),Z=s(e(j),2);{var F=_=>{var S=Ba();r(_,S)},b=_=>{var S=Ga();St(S,21,()=>t(Ct),It,(q,B)=>{var p=Ea(),x=e(p),I=e(x,!0);a(x);var E=s(x,2),R=e(E);a(E),a(p),m(()=>{i(I,t(B).name),i(R,`Driver: ${t(B).driver??""}`)}),r(q,p)}),a(S),r(_,S)};g(Z,_=>{t(Ct).length===0?_(F):_(b,!1)})}a(j),r(w,j)},L=w=>{var j=it(),Z=z(j);{var F=b=>{var _=Xa(),S=s(e(_),2);{var q=p=>{var x=Ka();r(p,x)},B=p=>{var x=Wa(),I=e(x),E=s(e(I));St(E,21,()=>t(Rt),It,(R,O)=>{var J=Qa(),ot=e(J),G=e(ot,!0);a(ot);var $=s(ot),lt=e($,!0);a($);var tt=s($),_t=e(tt,!0);a(tt);var pt=s(tt),wt=e(pt,!0);a(pt),a(J),m(Bt=>{i(G,t(O).name),i(lt,t(O).driver),i(_t,t(O).scope),i(wt,Bt)},[()=>t(O).id.slice(0,12)]),r(R,J)}),a(E),a(I),a(x),r(p,x)};g(S,p=>{t(Rt).length===0?p(q):p(B,!1)})}a(_),r(b,_)};g(Z,b=>{t(dt)==="networks"&&b(F)},!0)}r(w,j)};g(rt,w=>{t(dt)==="volumes"?w(l):w(L,!1)},!0)}r(f,k)};g(A,f=>{t(dt)==="images"?f(nt):f(ct,!1)},!0)}r(Y,C)};g(_a,Y=>{t(dt)==="containers"?Y(pa):Y(ua,!1)})}m(()=>{i(At,`v${t(H).version??""}`),i(st,t(H).containers_running),i(da,t(H).containers_stopped),i(na,t(H).images_count),i(ca,t(H).volumes_count)}),r(W,D)};g(mt,W=>{var D;(D=t(H))!=null&&D.running?W(Ut,!1):W(Mt)},!0)}r(Q,M)};g(N,Q=>{var M;(M=t(H))!=null&&M.installed?Q(K,!1):Q(T)},!0)}r(v,c)};g(ra,v=>{t(Et)?v(oa):v(la,!1)})}a(zt);var va=s(zt,2);{var ia=v=>{var c=ae();c.__click=Vt;var N=e(c);N.__click=P=>P.stopPropagation();var T=e(N),K=e(T),Q=e(K);a(K);var M=s(K,2);M.__click=Vt,a(T);var mt=s(T,2),Mt=e(mt);{var Ut=P=>{var X=Za();r(P,X)},W=P=>{var X=it(),Lt=z(X);{var At=U=>{var st=$a(),kt=e(st,!0);a(st),m(()=>i(kt,t(gt))),r(U,st)},ht=U=>{var st=te();r(U,st)};g(Lt,U=>{t(gt)?U(At):U(ht,!1)},!0)}r(P,X)};g(Mt,P=>{t(Jt)?P(Ut):P(W,!1)})}a(mt);var D=s(mt,2),yt=e(D);yt.__click=Vt,a(D),a(N),a(c),m(()=>i(Q,`Logs: ${t(Tt).name??""}`)),r(v,c)};g(va,v=>{t(Tt)&&v(ia)})}r(Zt,Gt),ma()}ba(["click"]);export{ce as component};
