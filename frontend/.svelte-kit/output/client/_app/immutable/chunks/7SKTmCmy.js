import{l as s,j as v,e as o,k as c,m as b,o as m,q as h,u as q}from"./N1otwjTT.js";function _(e,r,l=!1){if(e.multiple){if(r==null)return;if(!b(r))return m();for(var a of e.options)a.selected=r.includes(i(a));return}for(a of e.options){var t=i(a);if(h(t,r)){a.selected=!0;return}}(!l||r!==void 0)&&(e.selectedIndex=-1)}function y(e){var r=new MutationObserver(()=>{_(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),q(()=>{r.disconnect()})}function k(e,r,l=r){var a=new WeakSet,t=!0;s(e,"change",u=>{var f=u?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(f),i);else{var d=e.querySelector(f)??e.querySelector("option:not([disabled])");n=d&&i(d)}l(n),v!==null&&a.add(v)}),o(()=>{var u=r();if(e===document.activeElement){var f=c??v;if(a.has(f))return}if(_(e,u,t),t&&u===void 0){var n=e.querySelector(":checked");n!==null&&(u=i(n),l(u))}e.__value=u,t=!1}),y(e)}function i(e){return"__value"in e?e.__value:e.value}export{k as b};
